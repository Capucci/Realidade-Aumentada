<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Minha Experi√™ncia AR</title>
    <meta name="description" content="Experi√™ncia de Realidade Aumentada criada com AR Creator">
    
    <!-- MindAR Dependencies -->
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/hiukim/mind-ar-js@0.4.2/dist/mindar-image-aframe.prod.js"></script>
    
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: #ffffff;
            overflow: hidden;
        }
        
        .ar-instructions {
            position: fixed;
            top: 20px;
            left: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 15px;
            border-radius: 10px;
            z-index: 1000;
            text-align: center;
            font-size: 14px;
            backdrop-filter: blur(10px);
            transition: opacity 0.3s ease;
        }
        
        .ar-instructions.hidden {
            opacity: 0;
            pointer-events: none;
        }
        
        .ar-loading {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.9);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            z-index: 1001;
        }
        
        .ar-error {
            position: fixed;
            bottom: 20px;
            left: 20px;
            right: 20px;
            background: rgba(220, 38, 38, 0.9);
            color: white;
            padding: 15px;
            border-radius: 10px;
            z-index: 1000;
            text-align: center;
        }
        
        .spinner {
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-top: 3px solid white;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
            margin: 0 auto 10px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .credits {
            position: fixed;
            bottom: 10px;
            right: 10px;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 10px;
            z-index: 1000;
        }
    </style>
</head>
<body>
    <!-- Loading Screen -->
    <div id="loading" class="ar-loading">
        <div class="spinner"></div>
        <div>Carregando experi√™ncia AR...</div>
    </div>
    
    <!-- Instructions -->
    
    <div id="instructions" class="ar-instructions">
        üì± Aponte a c√¢mera para a imagem target para ver a experi√™ncia de Realidade Aumentada
        <br><small>Toque para ocultar estas instru√ß√µes</small>
    </div>
    
    
    <!-- Error Message -->
    <div id="error" class="ar-error" style="display: none;">
        ‚ùå Erro ao carregar a experi√™ncia AR. Verifique se a c√¢mera est√° funcionando.
    </div>
    
    <!-- AR Scene -->
    <a-scene 
        mindar-image="imageTargetSrc: blob:http://localhost:5173/9666365b-2c63-45e2-a9c6-3221a2411163; maxTrack: 1; showStats: false;" 
        color-space="sRGB" 
        renderer="colorManagement: true, physicallyCorrectLights" 
        vr-mode-ui="enabled: false" 
        device-orientation-permission-ui="enabled: false"
        loading-screen="enabled: false"
        style="position: fixed; top: 0; left: 0; width: 100%; height: 100%;">
        
        <!-- Assets -->
        <a-assets>
            <a-asset-item id="model" src="blob:http://localhost:5173/6be8cc3b-0176-4c64-a0ef-a8e63f6fbb54"></a-asset-item>
            
        </a-assets>
        
        <!-- Camera -->
        <a-camera position="0 0 0" look-controls="enabled: false"></a-camera>
        
        <!-- Target and 3D Model -->
        <a-entity mindar-image-target="targetIndex: 0">
            <a-gltf-model 
                id="arModel"
                src="#model"
                position="0 0 0.1"
                rotation="0 0 0"
                scale="1 1 1"
                animation-mixer="clip: *; loop: repeat"
                visible="false">
            </a-gltf-model>
            
            
        </a-entity>
    </a-scene>
    
    <!-- Credits -->
    <div class="credits">
        Criado com AR Creator
    </div>
    
    <script>
        // Hide loading screen when AR is ready
        document.addEventListener('DOMContentLoaded', function() {
            const sceneEl = document.querySelector('a-scene');
            const loadingEl = document.getElementById('loading');
            const instructionsEl = document.getElementById('instructions');
            const errorEl = document.getElementById('error');
            const modelEl = document.getElementById('arModel');
            const audioEl = document.getElementById('arAudio');
            
            // Hide loading when scene is loaded
            sceneEl.addEventListener('loaded', function() {
                setTimeout(() => {
                    loadingEl.style.display = 'none';
                }, 1000);
            });
            
            // Handle target found/lost
            sceneEl.addEventListener('targetFound', function() {
                console.log('Target encontrado!');
                if (modelEl) {
                    modelEl.setAttribute('visible', true);
                }
                
            });
            
            sceneEl.addEventListener('targetLost', function() {
                console.log('Target perdido!');
                if (modelEl) {
                    modelEl.setAttribute('visible', false);
                }
                
            });
            
            // Hide instructions on tap
            if (instructionsEl) {
                instructionsEl.addEventListener('click', function() {
                    instructionsEl.classList.add('hidden');
                });
                
                // Auto-hide after 5 seconds
                setTimeout(() => {
                    instructionsEl.classList.add('hidden');
                }, 5000);
            }
            
            // Error handling
            sceneEl.addEventListener('renderstart', function() {
                // AR started successfully
            });
            
            // Handle errors
            window.addEventListener('error', function(e) {
                console.error('AR Error:', e);
                errorEl.style.display = 'block';
                loadingEl.style.display = 'none';
            });
        });
    </script>
</body>
</html>
